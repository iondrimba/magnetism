!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);var r=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16)/255,g:parseInt(t[2],16)/255,b:parseInt(t[3],16)/255}:null};function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,s;return t=e,(i=[{key:"setup",value:function(){this.gui=new dat.GUI,this.backgroundColor="#801336",this.gutter={size:-.9},this.pendulum={length:4,angle:180,angleVelocity:0,angleAcceleration:0,origin:{x:0,y:0},current:{x:0,y:0}},this.meshes=[],this.grid={cols:40,rows:20},this.width=window.innerWidth,this.height=window.innerHeight,this.gui.addFolder("Background").addColor(this,"backgroundColor").onChange(function(e){document.body.style.backgroundColor=e}),window.addEventListener("resize",this.onResize.bind(this),{passive:!0})}},{key:"createScene",value:function(){this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement)}},{key:"addSphere",value:function(){var e={color:"#f9b60c"},t=new THREE.SphereGeometry(.3,32,32),i=new THREE.MeshPhysicalMaterial(e);this.sphere=new THREE.Mesh(t,i),this.sphere.position.set(0,0,0),this.gui.addFolder("Sphere Material").addColor(e,"color").onChange(function(e){i.color=r(e)}),this.scene.add(this.sphere)}},{key:"createCamera",value:function(){this.camera=new THREE.PerspectiveCamera(20,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.set(10,10,10),this.scene.add(this.camera)}},{key:"addAmbientLight",value:function(){var e=new THREE.AmbientLight("#fff",10);this.scene.add(e)}},{key:"getMesh",value:function(e,t){var i=new THREE.Mesh(e,t);return i.castShadow=!0,i.receiveShadow=!0,i}},{key:"addCameraControls",value:function(){this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.maxPolarAngle=50*Math.PI/180}},{key:"onResize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}},{key:"init",value:function(){this.setup(),this.createScene(),this.createCamera(),this.addSphere(),this.addAmbientLight(),this.createGrid(),this.addCameraControls(),this.animate()}},{key:"createGrid",value:function(){var e=this;this.topMaterialProps={color:"#42070f"},this.insideMaterialProps={color:"#07041c"},this.leftMaterialProps={color:"#51ff00"},this.topMaterial=new THREE.MeshPhysicalMaterial(this.topMaterialProps),this.insideMaterial=new THREE.MeshPhysicalMaterial(this.insideMaterialProps),this.leftMaterial=new THREE.MeshPhysicalMaterial(this.leftMaterialProps);var t=[this.leftMaterial,this.leftMaterial,this.topMaterial,this.insideMaterial,this.insideMaterial,this.insideMaterial];this.gui.addFolder("Mesh Material Top").addColor(this.topMaterialProps,"color").onChange(function(t){e.topMaterial.color=r(t)}),this.gui.addFolder("Mesh Material Inside").addColor(this.insideMaterialProps,"color").onChange(function(t){e.insideMaterial.color=r(t)}),this.gui.addFolder("Mesh Material Left").addColor(this.leftMaterialProps,"color").onChange(function(t){e.leftMaterial.color=r(t)}),this.groupMesh=new THREE.Object3D;for(var i=0;i<this.grid.rows;i++){this.meshes[i]=[];for(var n=0;n<this.grid.cols;n++){var s=new THREE.BoxBufferGeometry(.1,.1,.1),a=this.getMesh(s,t),o=new THREE.Object3D;a.position.y=.05,o.scale.set(1,.001,1),o.add(a),o.position.set(n+n*this.gutter.size,0,i+i*this.gutter.size),this.meshes[i][n]=o,this.groupMesh.add(o)}}var h=.46*(this.grid.cols+this.grid.cols*this.gutter.size),l=.46*(this.grid.rows+this.grid.rows*this.gutter.size);this.groupMesh.position.set(-h,0,-l),this.scene.add(this.groupMesh)}},{key:"draw",value:function(){this.pendulum.current.x=this.pendulum.origin.x+this.pendulum.length*Math.sin(this.pendulum.angle),this.pendulum.current.y=this.pendulum.origin.y+this.pendulum.length*Math.cos(this.pendulum.angle),this.pendulum.angleAcceleration=.001102*Math.sin(this.pendulum.angle),this.pendulum.angleVelocity+=this.pendulum.angleAcceleration,this.pendulum.angle+=this.pendulum.angleVelocity,this.sphere.position.set(this.pendulum.current.x,this.pendulum.current.y+3.6,0);for(var e=0;e<this.grid.rows;e++)for(var t=0;t<this.grid.cols;t++){var i=this.meshes[e][t],r=(o=this.sphere.position.x,h=this.sphere.position.z,l=i.position.x+this.groupMesh.position.x,d=i.position.z+this.groupMesh.position.z,Math.sqrt(Math.pow(o-l,2)+Math.pow(h-d,2))),n=(r-(s=.6))/(.001-s)*(90*r-(a=0))+a;gsap.to(i.scale,.2,{y:n<.001?.001:n})}var s,a,o,h,l,d}},{key:"animate",value:function(){this.controls.update(),this.draw(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate.bind(this))}}])&&n(t.prototype,i),s&&n(t,s),e}())).init()}]);