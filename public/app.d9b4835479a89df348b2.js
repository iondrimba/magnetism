!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t,i){var n;e.exports=((n=function(){function e(e){return r.appendChild(e.dom),e}function t(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";i=e}var i=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(e){e.preventDefault(),t(++i%r.children.length)}),!1);var a=(performance||Date).now(),s=a,o=0,l=e(new n.Panel("FPS","#0ff","#002")),h=e(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=e(new n.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:r,addPanel:e,showPanel:t,begin:function(){a=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(h.update(e-a,200),e>s+1e3&&(l.update(1e3*o/(e-s),100),s=e,o=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:r,setMode:t}}).Panel=function(e,t,i){var n=1/0,r=0,a=Math.round,s=a(window.devicePixelRatio||1),o=80*s,l=48*s,h=3*s,d=2*s,c=3*s,u=15*s,f=74*s,p=30*s,m=document.createElement("canvas");m.width=o,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*s+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=i,g.fillRect(0,0,o,l),g.fillStyle=t,g.fillText(e,h,d),g.fillRect(c,u,f,p),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(c,u,f,p),{dom:m,update:function(l,w){n=Math.min(n,l),r=Math.max(r,l),g.fillStyle=i,g.globalAlpha=1,g.fillRect(0,0,o,u),g.fillStyle=t,g.fillText(a(l)+" "+e+" ("+a(n)+"-"+a(r)+")",h,d),g.drawImage(m,c+s,u,f-s,p,c,u,f-s,p),g.fillRect(c+f-s,u,s,p),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(c+f-s,u,s,a((1-l/w)*p))}}},n)},function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(1);var n=i(0),r=i.n(n),a=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16)/255,g:parseInt(t[2],16)/255,b:parseInt(t[3],16)/255}:null};function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,(i=[{key:"setup",value:function(){this.stats=new r.a,this.stats.showPanel(0),document.body.appendChild(this.stats.dom),this.gui=new dat.GUI,this.backgroundColor="#801336",this.gutter={size:-.9},this.pendulum={length:4,angle:180,angleVelocity:0,angleAcceleration:0,origin:{x:0,y:0},current:{x:0,y:0}},this.meshes=[],this.grid={cols:40,rows:20},this.width=window.innerWidth,this.height=window.innerHeight,this.gui.addFolder("Background").addColor(this,"backgroundColor").onChange((function(e){document.body.style.backgroundColor=e})),window.addEventListener("resize",this.onResize.bind(this),{passive:!0})}},{key:"createScene",value:function(){this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement)}},{key:"addSphere",value:function(){var e={color:"#fff400"},t=new THREE.SphereGeometry(.3,32,32),i=new THREE.MeshPhysicalMaterial(e);this.sphere=new THREE.Mesh(t,i),this.sphere.position.set(0,0,0),this.gui.addFolder("Sphere Material").addColor(e,"color").onChange((function(e){i.color=a(e)})),this.scene.add(this.sphere)}},{key:"createCamera",value:function(){this.camera=new THREE.PerspectiveCamera(20,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.set(10,10,10),this.scene.add(this.camera)}},{key:"addAmbientLight",value:function(){var e=new THREE.AmbientLight("#fff",1);this.scene.add(e)}},{key:"getMesh",value:function(e,t,i){var n=new THREE.InstancedMesh(e,t,i);return n.instanceMatrix.setUsage(THREE.DynamicDrawUsage),n.castShadow=!0,n.receiveShadow=!0,n}},{key:"addCameraControls",value:function(){this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.maxPolarAngle=50*Math.PI/180}},{key:"onResize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}},{key:"init",value:function(){this.setup(),this.createScene(),this.createCamera(),this.addSphere(),this.addAmbientLight(),this.createGrid(),this.addCameraControls(),requestAnimationFrame(this.animate.bind(this))}},{key:"createGrid",value:function(){var e=this;this.topMaterialProps={color:"#ff214a"},this.insideMaterialProps={color:"#190d6d"},this.leftMaterialProps={color:"#fff400"},this.topMaterial=new THREE.MeshPhysicalMaterial(this.topMaterialProps),this.insideMaterial=new THREE.MeshPhysicalMaterial(this.insideMaterialProps),this.leftMaterial=new THREE.MeshPhysicalMaterial(this.leftMaterialProps);var t=[this.leftMaterial,this.leftMaterial,this.topMaterial,this.insideMaterial,this.insideMaterial,this.insideMaterial];this.gui.addFolder("Mesh Material Top").addColor(this.topMaterialProps,"color").onChange((function(t){e.topMaterial.color=a(t)})),this.gui.addFolder("Mesh Material Inside").addColor(this.insideMaterialProps,"color").onChange((function(t){e.insideMaterial.color=a(t)})),this.gui.addFolder("Mesh Material Left").addColor(this.leftMaterialProps,"color").onChange((function(t){e.leftMaterial.color=a(t)}));var i=new THREE.BoxBufferGeometry(.1,.1,.1);i.translate(0,.025,0),this.mesh=this.getMesh(i,t,this.grid.rows*this.grid.cols),this.scene.add(this.mesh);for(var n=0,r=.46*(this.grid.cols+this.grid.cols*this.gutter.size),s=.46*(this.grid.rows+this.grid.rows*this.gutter.size),o=0;o<this.grid.rows;o++){this.meshes[o]=[];for(var l=0;l<this.grid.cols;l++){var h=new THREE.Object3D;h.scale.set(1,.001,1),h.position.set(l+l*this.gutter.size-r,0,o+o*this.gutter.size-s),this.meshes[o][l]=h,h.updateMatrix(),this.mesh.setMatrixAt(n++,h.matrix)}}this.mesh.instanceMatrix.needsUpdate=!0}},{key:"draw",value:function(){this.pendulum.current.x=this.pendulum.origin.x+this.pendulum.length*Math.sin(this.pendulum.angle),this.pendulum.current.y=this.pendulum.origin.y+this.pendulum.length*Math.cos(this.pendulum.angle),this.pendulum.angleAcceleration=.001102*Math.sin(this.pendulum.angle),this.pendulum.angleVelocity+=this.pendulum.angleAcceleration,this.pendulum.angle+=this.pendulum.angleVelocity,this.sphere.position.set(this.pendulum.current.x,this.pendulum.current.y+3.6,0);for(var e,t,i,n,r,a,s=0,o=0;o<this.grid.rows;o++)for(var l=0;l<this.grid.cols;l++){var h=this.meshes[o][l],d=(i=this.sphere.position.x,n=this.sphere.position.z,r=h.position.x,a=h.position.z,Math.sqrt(Math.pow(i-r,2)+Math.pow(n-a,2))),c=(d-(e=.6))/(.001-e)*(140*d-(t=0))+t;gsap.to(h.scale,.2,{y:c<.001?.001:c}),h.updateMatrix(),this.mesh.setMatrixAt(s++,h.matrix)}this.mesh.instanceMatrix.needsUpdate=!0}},{key:"animate",value:function(){this.stats.begin(),this.controls.update(),this.draw(),this.renderer.render(this.scene,this.camera),this.stats.end(),requestAnimationFrame(this.animate.bind(this))}}])&&s(t.prototype,i),n&&s(t,n),e}())).init()}]);